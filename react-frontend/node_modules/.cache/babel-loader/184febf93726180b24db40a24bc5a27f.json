{"ast":null,"code":"var _jsxFileName = \"/home/menekou/projects/react/shortest-path/react-frontend/src/Login Page/LoginPage.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport './LoginPage.css';\nimport AuthHelper from '../Helpers/AuthHelper';\nimport InputValidationHelper from '../Helpers/InputValidationHelper';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { Redirect } from 'react-router-dom';\nimport UserContext from \"../UserContext\"; //Todo move this function to its own file\n//Returns login form based on login tab\n\nconst LoginForm = props => {\n  console.log(props.loginTab);\n  const [inputLoginState, setInputLoginState] = useState({\n    isUsernameValid: true,\n    usernameErrorMessage: \"\"\n  });\n  const [inputSignUpState, setInputSignUpState] = useState({\n    isUsernameValid: true,\n    usernameErrorMessage: \"\",\n    isEmailValid: true,\n    emailErrorMessage: \"\",\n    isPasswordValid: true,\n    passwordErrorMessage: \"\",\n    passwordsMatch: true,\n    passwordMatchErrorMessage: \"\"\n  });\n  const [inputGuestState, setInputGuestState] = useState({\n    isUsernameValid: true,\n    usernameErrorMessage: \"\"\n  });\n\n  const validateGuest = (e, username) => {\n    const isUsernameValid = InputValidationHelper.validateUsername(username);\n    console.log(isUsernameValid);\n    setInputGuestState({ ...inputGuestState,\n      isUsernameValid: isUsernameValid,\n      usernameErrorMessage: !isUsernameValid ? \"Enter a valid username\" : \"\"\n    });\n\n    if (isUsernameValid) {\n      e.preventDefault();\n      props.guest({\n        variables: {\n          username: username\n        }\n      });\n    }\n  };\n\n  const validateSignUp = (e, username, email, password1, password2) => {\n    const isUsernameValid = InputValidationHelper.validateUsername(username);\n    const isEmailValid = InputValidationHelper.validateEmail(email);\n    const isPasswordValid = InputValidationHelper.validatePassword(password1);\n    const passwordsMatch = InputValidationHelper.validatePasswords(password1, password2);\n    console.log(isUsernameValid);\n    setInputSignUpState({ ...inputSignUpState,\n      isUsernameValid: isUsernameValid,\n      usernameErrorMessage: !isUsernameValid ? \"Enter a valid username\" : \"\",\n      isEmailValid: isEmailValid,\n      emailErrorMessage: !isEmailValid ? \"Enter a valid email\" : \"\",\n      isPasswordValid: isPasswordValid,\n      passwordErrorMessage: !isPasswordValid ? \"Password must be a minimum of 8 characters\" : \"\",\n      passwordsMatch: passwordsMatch,\n      passwordMatchErrorMessage: !passwordsMatch ? \"Passwords must match\" : \"\"\n    });\n\n    if (isUsernameValid && isEmailValid && isPasswordValid && passwordsMatch) {\n      e.preventDefault();\n      props.signup({\n        variables: {\n          username: username,\n          email: email,\n          password: password1\n        }\n      });\n    }\n  };\n\n  const validateLogin = (e, username, password) => {\n    const isUsernameValid = InputValidationHelper.validateUsername(username);\n    console.log(isUsernameValid);\n    setInputLoginState({ ...inputLoginState,\n      isUsernameValid: isUsernameValid,\n      usernameErrorMessage: !isUsernameValid ? \"Enter a valid username\" : \"\"\n    });\n\n    if (isUsernameValid) {\n      e.preventDefault();\n      props.login({\n        variables: {\n          username: username,\n          password: password\n        }\n      });\n    }\n  };\n\n  if (props.loginTab === \"login\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, props.loginState === \"system-error\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 49\n      }\n    }, \"Unable to log you in at this time\"), props.loginState === \"invalid-login\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 50\n      }\n    }, \"Invalid login credentials\"), !inputLoginState.isUsernameValid && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 46\n      }\n    }, inputLoginState.usernameErrorMessage), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"loginUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      className: (!inputLoginState.isUsernameValid ? \"error\" : \"\") + \" form-control\",\n      id: \"loginUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"loginPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"loginPassword\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: e => validateLogin(e, e.target.form.elements[0].value, e.target.form.elements[1].value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }\n    }, \"Submit\"));\n  }\n\n  if (props.loginTab === \"signup\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }\n    }, props.loginState === \"system-error\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 49\n      }\n    }, \"Unable to register you in at this time\"), props.loginState === \"existing-account\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 53\n      }\n    }, \"Account with this username already exist\"), props.loginState === \"existing-email\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 51\n      }\n    }, \"Account with this email already exist\"), !inputSignUpState.isUsernameValid && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 47\n      }\n    }, inputSignUpState.usernameErrorMessage), !inputSignUpState.isEmailValid && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 44\n      }\n    }, inputSignUpState.emailErrorMessage), !inputSignUpState.isPasswordValid && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 47\n      }\n    }, inputSignUpState.passwordErrorMessage), !inputSignUpState.passwordMatch && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 45\n      }\n    }, inputSignUpState.passwordMatchErrorMessage), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"signupUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      className: (!inputSignUpState.isUsernameValid ? \"error\" : \"\") + \" form-control\",\n      id: \"signupUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"signupEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: (!inputSignUpState.isEmailValid ? \"error\" : \"\") + \" form-control\",\n      id: \"signupEmail\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Enter Email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"small\", {\n      id: \"emailHelp\",\n      className: \"form-text text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, \"We'll never share your email with anyone else.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"signupPassword1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: (!inputSignUpState.isPasswordValid || !inputSignUpState.passwordsMatch ? \"error\" : \"\") + \" form-control\",\n      id: \"signupPassword1\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"signupPassword2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: (!inputSignUpState.isPasswordValid || !inputSignUpState.passwordsMatch ? \"error\" : \"\") + \" form-control\",\n      id: \"signupPassword2\",\n      placeholder: \"Confirm Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: e => validateSignUp(e, e.target.form.elements[0].value, e.target.form.elements[1].value, e.target.form.elements[2].value, e.target.form.elements[3].value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, \"Submit\"));\n  }\n\n  if (props.loginTab === \"guest\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"guest\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }\n    }, props.loginState === \"system-error\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 49\n      }\n    }, \"Unable to log you in at this time\"), props.loginState === \"invalid-login\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 50\n      }\n    }, \"Invalid Login\"), props.loginState === \"existing-account\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 53\n      }\n    }, \"Existing account\"), !inputGuestState.isUsernameValid && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 46\n      }\n    }, inputGuestState.usernameErrorMessage), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"guestUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      className: (!inputGuestState.isUsernameValid ? \"error\" : \"\") + \" form-control\",\n      id: \"guestUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: e => validateGuest(e, e.target.form.elements[0].value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }\n    }, \"Submit\"));\n  }\n};\n\nfunction LoginPage(props) {\n  //Login tab state variable\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const [loginTab, setLoginTab] = useState(\"login\");\n  const [loginState, setLoginState] = useState(\"\");\n  const [login, {\n    error: loginError,\n    data: loginData\n  }] = useLazyQuery(AuthHelper.login);\n  const [guest, {\n    error: guestError,\n    data: guestData\n  }] = useMutation(AuthHelper.guest);\n  const [signup, {\n    error: signupError,\n    data: signupData\n  }] = useMutation(AuthHelper.signup);\n  const setUserRef = use; //Only rerenders on changes\n\n  useEffect(() => {\n    // <--------------------------------GUEST--------------------------------> \n    if (guestError) {\n      console.log(guestError);\n      props.updateUser(guestError, setUser);\n      props.logout(setUser);\n      setLoginState(\"system-error\");\n      return;\n    }\n\n    ;\n\n    if (guestData) {\n      if (!guestData.guest.response_type.includes(\"Error\")) {\n        // console.log(guestData.guest);\n        props.updateUser(guestData.guest, setUser);\n        setLoginState(\"success\");\n        return;\n      }\n\n      ;\n      console.log(guestData);\n      props.updateUser(guestData, setUser);\n      props.logout(setUser);\n\n      if (guestData.guest.response === \"Account already exist\") {\n        setLoginState(\"existing-account\");\n      } else {\n        setLoginState(\"invalid-login\");\n      }\n\n      return;\n    }\n\n    ;\n  }, [guestError, guestData, setUser, props]);\n  useEffect(() => {\n    // <--------------------------------SIGNUP-------------------------------->\n    if (signupError) {\n      console.log(signupError);\n      props.updateUser(signupError, setUser);\n      props.logout(setUser);\n      setLoginState(\"system-error\");\n      return;\n    }\n\n    ;\n\n    if (signupData) {\n      if (!signupData.register.response_type.includes(\"Error\")) {\n        // console.log(signupData.register);\n        props.updateUser(signupData.register, setUser);\n        setLoginState(\"success\");\n        return;\n      }\n\n      ;\n      console.log(signupData);\n      props.updateUser(signupData, setUser);\n      props.logout(setUser);\n\n      if (signupData.register.response === \"Account already exist\") {\n        setLoginState(\"existing-account\");\n      } else {\n        setLoginState(\"invalid-login\");\n      }\n\n      return;\n    }\n\n    ;\n  }, [signupError, signupData, setUser, props]);\n  useEffect(() => {\n    // <--------------------------------LOGIN-------------------------------->\n    if (loginError) {\n      console.log(loginError);\n      props.updateUser(loginError, setUser);\n      props.logout(setUser);\n      setLoginState(\"system-error\");\n      return;\n    }\n\n    ;\n\n    if (loginData) {\n      if (!loginData.login.response_type.includes(\"Error\")) {\n        // console.log(loginData.login);\n        props.updateUser(loginData.login, setUser);\n        setLoginState(\"success\");\n        return;\n      }\n\n      ;\n      console.log(loginData.login);\n      props.updateUser(loginData.login, setUser);\n      props.logout(setUser);\n      setLoginState(\"invalid-login\");\n      return;\n    }\n\n    ;\n  }, [loginError, loginData, setUser, props]); // <--------------------------------RENDERFORM-------------------------------->\n\n  const renderForm = () => {\n    return /*#__PURE__*/React.createElement(LoginForm, {\n      loginTab: loginTab,\n      loginState: loginState,\n      login: login,\n      signup: signup,\n      guest: guest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 7\n      }\n    });\n  }; //Change login window tab\n\n\n  const changeLoginTab = (e, loginOption) => {\n    // see if this becomes a problem later\n    document.forms[0].reset();\n    setLoginState(\"\");\n    let allLoginButtons = document.getElementsByClassName(\"login-options\")[0].childNodes;\n    allLoginButtons.forEach(button => {\n      button.classList.remove(\"active\");\n    });\n    e.target.closest(\"button\").classList.add(\"active\");\n    return loginOption;\n  }; // <--------------------------------HTML-------------------------------->\n\n\n  if (loginState === \"success\") {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (user) {\n    if (props.location.state) {\n      if (props.location.state.from.pathname === \"/login\") {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/home\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 16\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: props.location.state.from.pathname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 14\n        }\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"login-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }\n  }, renderForm(), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"login-btn btn active\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `login`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 15\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"signup-btn btn\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `signup`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 15\n    }\n  }, \"Sign Up\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"guest-btn btn\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `guest`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 15\n    }\n  }, \"Guest\"))))));\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/menekou/projects/react/shortest-path/react-frontend/src/Login Page/LoginPage.js"],"names":["React","useState","useEffect","useContext","AuthHelper","InputValidationHelper","useLazyQuery","useMutation","Redirect","UserContext","LoginForm","props","console","log","loginTab","inputLoginState","setInputLoginState","isUsernameValid","usernameErrorMessage","inputSignUpState","setInputSignUpState","isEmailValid","emailErrorMessage","isPasswordValid","passwordErrorMessage","passwordsMatch","passwordMatchErrorMessage","inputGuestState","setInputGuestState","validateGuest","e","username","validateUsername","preventDefault","guest","variables","validateSignUp","email","password1","password2","validateEmail","validatePassword","validatePasswords","signup","password","validateLogin","login","loginState","target","form","elements","value","passwordMatch","LoginPage","user","setUser","setLoginTab","setLoginState","error","loginError","data","loginData","guestError","guestData","signupError","signupData","setUserRef","use","updateUser","logout","response_type","includes","response","register","renderForm","changeLoginTab","loginOption","document","forms","reset","allLoginButtons","getElementsByClassName","childNodes","forEach","button","classList","remove","closest","add","location","state","from","pathname","$event"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport './LoginPage.css';\nimport AuthHelper from '../Helpers/AuthHelper';\nimport InputValidationHelper from '../Helpers/InputValidationHelper';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { Redirect } from 'react-router-dom'\nimport UserContext from \"../UserContext\";\n\n//Todo move this function to its own file\n//Returns login form based on login tab\nconst LoginForm = (props) => {\n  console.log(props.loginTab);\n  const [inputLoginState, setInputLoginState] = useState({\n    isUsernameValid: true,\n    usernameErrorMessage: \"\",\n  })\n\n  const [inputSignUpState, setInputSignUpState] = useState({\n    isUsernameValid: true,\n    usernameErrorMessage: \"\",\n    isEmailValid: true,\n    emailErrorMessage: \"\",\n    isPasswordValid: true,\n    passwordErrorMessage: \"\",\n    passwordsMatch: true,\n    passwordMatchErrorMessage: \"\",\n  })\n\n  const [inputGuestState, setInputGuestState] = useState({\n    isUsernameValid: true,\n    usernameErrorMessage: \"\",\n  })\n\n  const validateGuest = (e, username) => {\n    const isUsernameValid = InputValidationHelper.validateUsername(username);\n\n    console.log(isUsernameValid)\n    setInputGuestState({\n      ...inputGuestState,\n      isUsernameValid: isUsernameValid,\n      usernameErrorMessage: !isUsernameValid ? \"Enter a valid username\" : \"\",\n    })\n\n    if(isUsernameValid){\n      e.preventDefault();\n\n      props.guest({\n        variables: {\n          username: username,\n        }\n      })\n    }\n  }\n\n  const validateSignUp = (e, username, email, password1, password2) => {\n    const isUsernameValid = InputValidationHelper.validateUsername(username);\n    const isEmailValid = InputValidationHelper.validateEmail(email);\n    const isPasswordValid = InputValidationHelper.validatePassword(password1);\n    const passwordsMatch = InputValidationHelper.validatePasswords(password1, password2);\n\n    \n    console.log(isUsernameValid)\n    setInputSignUpState({\n      ...inputSignUpState,\n      isUsernameValid: isUsernameValid,\n      usernameErrorMessage: !isUsernameValid ? \"Enter a valid username\" : \"\",\n      isEmailValid: isEmailValid,\n      emailErrorMessage: !isEmailValid ? \"Enter a valid email\" : \"\",\n      isPasswordValid: isPasswordValid,\n      passwordErrorMessage: !isPasswordValid ? \"Password must be a minimum of 8 characters\" : \"\",\n      passwordsMatch: passwordsMatch,\n      passwordMatchErrorMessage: !passwordsMatch ? \"Passwords must match\" : \"\",\n    })\n\n    if(isUsernameValid && isEmailValid && isPasswordValid && passwordsMatch){\n      e.preventDefault();\n\n      props.signup({\n        variables: {\n          username: username,\n          email: email,\n          password: password1\n        }\n      })\n    }\n  }\n\n  const validateLogin = (e, username, password) => {\n    const isUsernameValid = InputValidationHelper.validateUsername(username);\n\n    console.log(isUsernameValid)\n    setInputLoginState({\n      ...inputLoginState,\n      isUsernameValid: isUsernameValid,\n      usernameErrorMessage: !isUsernameValid ? \"Enter a valid username\" : \"\",\n    })\n\n    if(isUsernameValid){\n      e.preventDefault();\n\n      props.login({\n        variables: {\n          username: username,\n          password: password\n        }\n      })\n    }\n  }\n\n  if(props.loginTab === \"login\"){\n    return (\n      <form className=\"login\">\n        {props.loginState === \"system-error\" && <p className=\"error-text\">Unable to log you in at this time</p>}\n        {props.loginState === \"invalid-login\" && <p className=\"error-text\">Invalid login credentials</p>}\n        {!inputLoginState.isUsernameValid && <div className=\"error-text\">{inputLoginState.usernameErrorMessage}</div>}\n\n        <div className=\"form-group\">\n          <label htmlFor=\"loginUsername\">Username</label>\n          <input type=\"username\" className={(!inputLoginState.isUsernameValid ? \"error\" : \"\") + \" form-control\"} id=\"loginUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"loginPassword\">Password</label>\n          <input type=\"password\" className=\"form-control\" id=\"loginPassword\" placeholder=\"Password\"></input>\n        </div>\n        <br></br>\n        <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => validateLogin(e, e.target.form.elements[0].value, e.target.form.elements[1].value)}>Submit</button>\n      </form>\n    );\n  }\n\n  if(props.loginTab === \"signup\"){\n    return (\n      <form className=\"signup\">\n        {props.loginState === \"system-error\" && <p className=\"error-text\">Unable to register you in at this time</p>}\n        {props.loginState === \"existing-account\" && <p className=\"error-text\">Account with this username already exist</p>}\n        {props.loginState === \"existing-email\" && <p className=\"error-text\">Account with this email already exist</p>}\n        {!inputSignUpState.isUsernameValid && <div className=\"error-text\">{inputSignUpState.usernameErrorMessage}</div>}\n        {!inputSignUpState.isEmailValid && <div className=\"error-text\">{inputSignUpState.emailErrorMessage}</div>}\n        {!inputSignUpState.isPasswordValid && <div className=\"error-text\">{inputSignUpState.passwordErrorMessage}</div>}\n        {!inputSignUpState.passwordMatch && <div className=\"error-text\">{inputSignUpState.passwordMatchErrorMessage}</div>}\n\n        <div className=\"form-group\">\n          <label htmlFor=\"signupUsername\">Username</label>\n          <input type=\"username\" className={(!inputSignUpState.isUsernameValid ? \"error\" : \"\") + \" form-control\"} id=\"signupUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"signupEmail\">Email address</label>\n          <input type=\"email\" className={(!inputSignUpState.isEmailValid ? \"error\" : \"\") + \" form-control\"} id=\"signupEmail\" aria-describedby=\"emailHelp\" placeholder=\"Enter Email\"></input>\n          <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n        </div>\n        <div className=\"password\">\n          <div className=\"form-group\">\n            <label htmlFor=\"signupPassword1\">Password</label>\n            <input type=\"password\" className={(!inputSignUpState.isPasswordValid || !inputSignUpState.passwordsMatch ? \"error\" : \"\") + \" form-control\"} id=\"signupPassword1\" placeholder=\"Password\"></input>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"signupPassword2\">Confirm Password</label>\n            <input type=\"password\" className={(!inputSignUpState.isPasswordValid || !inputSignUpState.passwordsMatch ? \"error\" : \"\") + \" form-control\"} id=\"signupPassword2\" placeholder=\"Confirm Password\"></input>\n          </div>\n        </div>\n        <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => validateSignUp(e, e.target.form.elements[0].value, e.target.form.elements[1].value, e.target.form.elements[2].value, e.target.form.elements[3].value)}>Submit</button>\n      </form>\n    );\n  }\n\n  if(props.loginTab === \"guest\"){\n    return (\n      <form className=\"guest\">\n        {props.loginState === \"system-error\" && <p className=\"error-text\">Unable to log you in at this time</p>}\n        {props.loginState === \"invalid-login\" && <p className=\"error-text\">Invalid Login</p>}\n        {props.loginState === \"existing-account\" && <p className=\"error-text\">Existing account</p>}\n        {!inputGuestState.isUsernameValid && <div className=\"error-text\">{inputGuestState.usernameErrorMessage}</div>}\n\n        <div className=\"form-group\">\n          <label htmlFor=\"guestUsername\">Username</label>\n          <input type=\"username\" className={(!inputGuestState.isUsernameValid ? \"error\" : \"\") + \" form-control\"} id=\"guestUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => validateGuest(e, e.target.form.elements[0].value)}>Submit</button>\n      </form>\n    );\n  }\n};\n\nfunction LoginPage(props) {\n  //Login tab state variable\n  const {user, setUser} = useContext(UserContext);\n  const [loginTab, setLoginTab] = useState(\"login\");\n  const [loginState, setLoginState] = useState(\"\");\n  const [login, { error: loginError, data: loginData }] = useLazyQuery(AuthHelper.login);\n  const [guest, { error: guestError, data: guestData }] = useMutation(AuthHelper.guest);\n  const [signup, { error: signupError, data: signupData }] = useMutation(AuthHelper.signup);\n\n  const setUserRef = use\n \n  //Only rerenders on changes\n  useEffect(() => { \n    // <--------------------------------GUEST--------------------------------> \n    if(guestError){\n      console.log(guestError);\n\n      props.updateUser(guestError, setUser);\n\n      props.logout(setUser);\n  \n      setLoginState(\"system-error\");\n\n      return;\n    };\n  \n    if(guestData){\n      if(!guestData.guest.response_type.includes(\"Error\")){\n        // console.log(guestData.guest);\n\n        props.updateUser(guestData.guest, setUser);\n        \n        setLoginState(\"success\");\n\n        return;\n      };\n  \n      console.log(guestData);\n\n      props.updateUser(guestData, setUser);\n\n      props.logout(setUser);\n\n      if(guestData.guest.response === \"Account already exist\"){\n        setLoginState(\"existing-account\");\n      }else{\n        setLoginState(\"invalid-login\");\n      }\n      \n      return;\n    };\n  }, [guestError, guestData, setUser, props])\n\n  useEffect(() => { \n    // <--------------------------------SIGNUP-------------------------------->\n\n    if(signupError){\n      console.log(signupError);\n\n      props.updateUser(signupError, setUser);\n\n      props.logout(setUser);\n  \n      setLoginState(\"system-error\");\n\n      return;\n    };\n  \n    if(signupData){\n      if(!signupData.register.response_type.includes(\"Error\")){\n        // console.log(signupData.register);\n\n        props.updateUser(signupData.register, setUser);\n        \n        setLoginState(\"success\");\n\n        return;\n      };\n  \n      console.log(signupData);\n\n      props.updateUser(signupData, setUser);\n\n      props.logout(setUser);\n\n      if(signupData.register.response === \"Account already exist\"){\n        setLoginState(\"existing-account\");\n      }else{\n        setLoginState(\"invalid-login\");\n      }\n      \n      return;\n    };\n  }, [signupError, signupData, setUser, props])\n  \n  useEffect(() => { \n    // <--------------------------------LOGIN-------------------------------->\n  \n    if(loginError){\n      console.log(loginError);\n      \n      props.updateUser(loginError, setUser);\n\n      props.logout(setUser);\n      \n      setLoginState(\"system-error\");\n\n      return;\n    };\n  \n    if(loginData){\n      if(!loginData.login.response_type.includes(\"Error\")){\n        // console.log(loginData.login);\n        \n        props.updateUser(loginData.login, setUser);\n\n        setLoginState(\"success\");\n\n        return;\n      };\n\n  \n      console.log(loginData.login);\n\n      props.updateUser(loginData.login, setUser);\n\n      props.logout(setUser);\n\n      setLoginState(\"invalid-login\");\n\n      return;\n    };\n  }, [loginError, loginData, setUser, props])\n\n\n  // <--------------------------------RENDERFORM-------------------------------->\n\n  const renderForm = () => {\n    return (\n      <LoginForm \n        loginTab={loginTab}\n        loginState={loginState}\n        login={login}\n        signup={signup}\n        guest={guest}\n      />\n    )\n  }\n\n  //Change login window tab\n  const changeLoginTab = (e, loginOption) => {\n    // see if this becomes a problem later\n    document.forms[0].reset();\n\n    setLoginState(\"\");\n\n    let allLoginButtons = document.getElementsByClassName(\"login-options\")[0].childNodes;\n    \n    allLoginButtons.forEach((button) => {\n      button.classList.remove(\"active\");\n    });\n\n    e.target.closest(\"button\").classList.add(\"active\");\n\n    return loginOption;\n  }\n\n  // <--------------------------------HTML-------------------------------->\n  if(loginState === \"success\"){\n    return <Redirect to='/home' />\n  }\n\n  if(user){\n    if(props.location.state){\n      if(props.location.state.from.pathname === \"/login\"){\n        return <Redirect to=\"/home\" />\n      }\n\n      return <Redirect to={props.location.state.from.pathname} />\n    }\n  }\n\n  return (\n    <div id=\"login-page\">\n      <div className=\"login-container\">\n        <div className=\"login-form\">\n          {/* Login form */}\n          {renderForm()}\n          \n          <div className=\"login-options\">\n            <button className=\"login-btn btn active\" onClick={($event) => setLoginTab(changeLoginTab($event, `login`))}>\n              <h1>Login</h1>\n            </button>\n            <button className=\"signup-btn btn\" onClick={($event) => setLoginTab(changeLoginTab($event, `signup`))}>\n              <h1>Sign Up</h1>\n            </button>\n            <button className=\"guest-btn btn\" onClick={($event) => setLoginTab(changeLoginTab($event, `guest`))}>\n              <h1>Guest</h1>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}
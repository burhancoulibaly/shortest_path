{"ast":null,"code":"var _jsxFileName = \"/home/menekou/projects/react/shortest-path/react-frontend/src/Login Page/LoginPage.js\";\nimport React, { useState } from 'react';\nimport './LoginPage.css';\nimport AuthHelper from '../Auth Helpers/AuthHelper';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { Redirect } from 'react-router-dom';\n\nconst LoginForm = props => {\n  const [loginState, setLoginState] = useState(valid);\n  const [login, {\n    loading: loginLoading,\n    error: loginError,\n    data: loginData\n  }] = useLazyQuery(AuthHelper.login);\n  const [signup, {\n    loading: signupLoading,\n    error: signupError,\n    data: signupData\n  }] = useMutation(AuthHelper.signup);\n\n  const generateForm = (error = {\n    message: \"\"\n  }) => {\n    if (props.loginTab === \"login\") {\n      return /*#__PURE__*/React.createElement(\"form\", {\n        className: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 9\n        }\n      }, loginState === \"system-error\" && /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 45\n        }\n      }, \"Unable to log you in at this time\"), loginState === \"invalid-login\" && /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 46\n        }\n      }, \"Unable to log you in at this time\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"loginUsername\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 13\n        }\n      }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"username\",\n        className: \"form-control\",\n        id: \"loginUsername\",\n        \"aria-describedby\": \"usernameHelp\",\n        placeholder: \"Enter Username\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"loginPassword\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 13\n        }\n      }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        id: \"loginPassword\",\n        placeholder: \"Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: e => login({\n          variables: {\n            username: e.target.form.elements[0].value,\n            password: e.target.form.elements[1].value\n          }\n        }, e.preventDefault(), console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }\n      }, \"Submit\"));\n    }\n\n    if (props.loginTab === \"signup\") {\n      return /*#__PURE__*/React.createElement(\"form\", {\n        className: \"signup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }\n      }, error.message), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"signupUsername\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }\n      }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"username\",\n        className: \"form-control\",\n        id: \"signupUsername\",\n        \"aria-describedby\": \"usernameHelp\",\n        placeholder: \"Enter Username\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"signupEmail\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }\n      }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"email\",\n        className: \"form-control\",\n        id: \"signupEmail\",\n        \"aria-describedby\": \"emailHelp\",\n        placeholder: \"Enter Email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"small\", {\n        id: \"emailHelp\",\n        className: \"form-text text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }\n      }, \"We'll never share your email with anyone else.\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"signupPassword1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }\n      }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        id: \"signupPassword1\",\n        placeholder: \"Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"signupPassword2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }\n      }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        id: \"signupPassword2\",\n        placeholder: \"Confirm Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: e => signup( //have this call a function beforehand here to validate passwords and form elements\n        {\n          variables: {\n            username: e.target.form.elements[0].value,\n            email: e.target.form.elements[1].value,\n            password: e.target.form.elements[2].value\n          }\n        }, e.preventDefault(), console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }\n      }, \"Submit\"));\n    }\n\n    if (props.loginTab === \"guest\") {\n      return /*#__PURE__*/React.createElement(\"form\", {\n        className: \"guest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      }, error.message), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"guestUsername\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"username\",\n        className: \"form-control\",\n        id: \"guestUsername\",\n        \"aria-describedby\": \"usernameHelp\",\n        placeholder: \"Enter Username\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: e => login({\n          variables: {\n            username: e.target.form.elements[0].value,\n            password: \"\"\n          }\n        }, e.preventDefault(), console.log(`\"${e.target.form.elements[0].value}\"`)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }\n      }, \"Submit\"));\n    }\n  };\n\n  if (signupError) {\n    console.log(signupError);\n    let errorMessage = {\n      message: \"Unable to register you in at this time.\"\n    };\n    return generateForm(errorMessage);\n  }\n\n  ;\n\n  if (signupLoading) {\n    console.log(\"...loading\");\n  }\n\n  if (signupData) {\n    if (!signupData.register.response_type.includes(\"Error\")) {\n      console.log(signupData.register);\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 14\n        }\n      });\n    }\n\n    ;\n    console.log(signupData);\n  }\n\n  ;\n\n  if (loginError) {\n    console.log(loginError);\n    let errorMessage = {\n      message: \"Unable to log you in at this time.\"\n    };\n    return generateForm(errorMessage);\n  }\n\n  ;\n\n  if (loginLoading) {\n    console.log(\"...loading\");\n  }\n\n  if (loginData) {\n    if (!loginData.login.response_type.includes(\"Error\")) {\n      console.log(loginData.login);\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 14\n        }\n      });\n    }\n\n    ;\n    console.log(loginData);\n    let errorMessage = {\n      message: \"Invalid login.\"\n    };\n    return generateForm(errorMessage);\n  }\n\n  ;\n  return generateForm();\n};\n\nfunction LoginPage() {\n  //Login tab state variable\n  const [loginTab, setLoginTab] = useState(\"login\");\n\n  const renderForm = () => {\n    return /*#__PURE__*/React.createElement(LoginForm, {\n      loginTab: loginTab,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }\n    });\n  };\n\n  const changeLoginTab = (e, loginOption) => {\n    // see if this becomes a problem later\n    document.forms[0].reset();\n    let allLoginButtons = document.getElementsByClassName(\"login-options\")[0].childNodes;\n    allLoginButtons.forEach(button => {\n      button.classList.remove(\"active\");\n    });\n    e.target.closest(\"button\").classList.add(\"active\");\n    return loginOption;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"login-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }\n  }, renderForm(), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"login-btn btn active\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `login`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"signup-btn btn\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `signup`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, \"Sign Up\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"guest-btn btn\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `guest`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }, \"Guest\")))));\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/menekou/projects/react/shortest-path/react-frontend/src/Login Page/LoginPage.js"],"names":["React","useState","AuthHelper","useLazyQuery","useMutation","Redirect","LoginForm","props","loginState","setLoginState","valid","login","loading","loginLoading","error","loginError","data","loginData","signup","signupLoading","signupError","signupData","generateForm","message","loginTab","e","variables","username","target","form","elements","value","password","preventDefault","console","log","email","errorMessage","register","response_type","includes","LoginPage","setLoginTab","renderForm","changeLoginTab","loginOption","document","forms","reset","allLoginButtons","getElementsByClassName","childNodes","forEach","button","classList","remove","closest","add","$event"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport './LoginPage.css';\nimport AuthHelper from '../Auth Helpers/AuthHelper';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { Redirect } from 'react-router-dom'\n\nconst LoginForm = (props) => {\n  const [loginState, setLoginState] = useState(valid)\n  const [login, { loading: loginLoading, error: loginError, data: loginData }] = useLazyQuery(AuthHelper.login);\n  const [signup, { loading: signupLoading, error: signupError, data: signupData }] = useMutation(AuthHelper.signup);\n\n  const generateForm = (error = { message: \"\" }) => {\n    if(props.loginTab === \"login\"){\n      return (\n        <form className=\"login\">\n          {loginState === \"system-error\" && <p>Unable to log you in at this time</p>}\n          {loginState === \"invalid-login\" && <p>Unable to log you in at this time</p>}\n          <div className=\"form-group\">\n            <label htmlFor=\"loginUsername\">Username</label>\n            <input type=\"username\" className=\"form-control\" id=\"loginUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"loginPassword\">Password</label>\n            <input type=\"password\" className=\"form-control\" id=\"loginPassword\" placeholder=\"Password\"></input>\n          </div>\n          <br></br>\n          <button type=\"button\" className=\"btn btn-primary\" onClick={\n              (e) => login(\n              {\n                variables: {\n                  username: e.target.form.elements[0].value,\n                  password: e.target.form.elements[1].value\n                }\n              },\n              e.preventDefault(),\n              console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n              )\n            }>Submit</button>\n        </form>\n      );\n    }\n  \n    if(props.loginTab === \"signup\"){\n      return (\n        <form className=\"signup\">\n          <p className=\"error\">{error.message}</p>\n          <div className=\"form-group\">\n            <label htmlFor=\"signupUsername\">Username</label>\n            <input type=\"username\" className=\"form-control\" id=\"signupUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"signupEmail\">Email address</label>\n            <input type=\"email\" className=\"form-control\" id=\"signupEmail\" aria-describedby=\"emailHelp\" placeholder=\"Enter Email\"></input>\n            <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n          </div>\n          <div className=\"password\">\n            <div className=\"form-group\">\n              <label htmlFor=\"signupPassword1\">Password</label>\n              <input type=\"password\" className=\"form-control\" id=\"signupPassword1\" placeholder=\"Password\"></input>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"signupPassword2\">Confirm Password</label>\n              <input type=\"password\" className=\"form-control\" id=\"signupPassword2\" placeholder=\"Confirm Password\"></input>\n            </div>\n          </div>\n          <button type=\"button\" className=\"btn btn-primary\" onClick={\n              (e) => signup(\n              //have this call a function beforehand here to validate passwords and form elements\n              {\n                variables: {\n                  username: e.target.form.elements[0].value,\n                  email: e.target.form.elements[1].value,\n                  password: e.target.form.elements[2].value\n                }\n              },\n              e.preventDefault(),\n              console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n              )\n            }>Submit</button>\n        </form>\n      );\n    }\n  \n    if(props.loginTab === \"guest\"){\n      return (\n        <form className=\"guest\">\n          <p className=\"error\">{error.message}</p>\n          <div className=\"form-group\">\n            <label htmlFor=\"guestUsername\">Username</label>\n            <input type=\"username\" className=\"form-control\" id=\"guestUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n          </div>\n          <button type=\"button\" className=\"btn btn-primary\" onClick={\n              (e) => login(\n              {\n                variables: {\n                  username: e.target.form.elements[0].value,\n                  password: \"\"\n                }\n              },\n              e.preventDefault(),\n              console.log(`\"${e.target.form.elements[0].value}\"`),\n              )\n            }>Submit</button>\n        </form>\n      );\n    }\n  }\n\n  if(signupError){\n    console.log(signupError);\n\n    let errorMessage = {\n      message: \"Unable to register you in at this time.\"\n    }\n\n    return generateForm(errorMessage);\n  };\n\n  if(signupLoading){\n    console.log(\"...loading\");\n  }\n\n  if(signupData){\n    if(!signupData.register.response_type.includes(\"Error\")){\n      console.log(signupData.register);\n      \n      return <Redirect to='/' />\n    };\n\n    console.log(signupData);\n  };\n\n  if(loginError){\n    console.log(loginError);\n\n    let errorMessage = {\n      message: \"Unable to log you in at this time.\"\n    }\n\n    return generateForm(errorMessage);\n  };\n\n  if(loginLoading){\n    console.log(\"...loading\");\n  }\n\n  if(loginData){\n    if(!loginData.login.response_type.includes(\"Error\")){\n      console.log(loginData.login);\n      \n      return <Redirect to='/' />\n    };\n\n    console.log(loginData);\n\n    let errorMessage = {\n      message: \"Invalid login.\"\n    }\n\n    return generateForm(errorMessage);\n  };\n  \n  return generateForm();\n}\n\nfunction LoginPage() {\n  //Login tab state variable\n  const [loginTab, setLoginTab] = useState(\"login\");\n\n  const renderForm = () => {\n    return (\n      <LoginForm \n        loginTab={loginTab}\n      />\n    )\n  }\n\n  const changeLoginTab = (e, loginOption) => {\n    // see if this becomes a problem later\n    document.forms[0].reset();\n\n    let allLoginButtons = document.getElementsByClassName(\"login-options\")[0].childNodes;\n    \n    allLoginButtons.forEach((button) => {\n      button.classList.remove(\"active\");\n    });\n\n    e.target.closest(\"button\").classList.add(\"active\");\n\n    return loginOption;\n  }\n\n  return (\n    <div id=\"login-page\">\n      <div className=\"login-container\">\n\n        {/* Login form */}\n        {renderForm()}\n   \n        <div className=\"login-options\">\n          <button className=\"login-btn btn active\" onClick={($event) => setLoginTab(changeLoginTab($event, `login`))}>\n            <h1>Login</h1>\n          </button>\n          <button className=\"signup-btn btn\" onClick={($event) => setLoginTab(changeLoginTab($event, `signup`))}>\n            <h1>Sign Up</h1>\n          </button>\n          <button className=\"guest-btn btn\" onClick={($event) => setLoginTab(changeLoginTab($event, `guest`))}>\n            <h1>Guest</h1>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}
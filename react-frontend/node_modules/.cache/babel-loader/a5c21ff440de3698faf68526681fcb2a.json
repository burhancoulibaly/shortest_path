{"ast":null,"code":"var _jsxFileName = \"/home/menekou/projects/react/shortest-path/react-frontend/src/Login Page/LoginPage.js\";\nimport React from 'react';\nimport './LoginPage.css';\nimport AuthHelper from '../Auth Helpers/AuthHelper';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { useHistory } from \"react-router-dom\";\n\nconst Authenticate = props => {\n  let history = useHistory();\n  const [login, {\n    loading,\n    error,\n    data\n  }] = useLazyQuery(AuthHelper.login);\n  const [signup, {\n    signupLoading,\n    signupError,\n    signupData\n  }] = useMutation(AuthHelper.signup);\n\n  const generateButton = () => {\n    if (props.loginOption === \"login\") {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: e => login({\n          variables: {\n            username: e.target.form.elements[0].value,\n            password: e.target.form.elements[1].value\n          }\n        }, e.preventDefault(), console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 9\n        }\n      }, \"Submit\");\n    }\n\n    if (props.loginOption === \"signup\") {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: e => signup( //have this call a function beforehand here to validate passwords and form elements\n        {\n          variables: {\n            username: e.target.form.elements[0],\n            email: e.target.form.elements[1],\n            password: e.target.form.elements[2]\n          }\n        }, e.preventDefault(), console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 9\n        }\n      }, \"Submit\");\n    }\n\n    if (props.loginOption === \"guest\") {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: e => login({\n          variables: {\n            username: e.target.form.elements[0],\n            password: \"\"\n          }\n        }, e.preventDefault(), console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }\n      }, \"Submit\");\n    }\n  };\n\n  if (error) {\n    console.log(error); // let formRef = document.getElementsByClassName(\"login\")[0];\n    // console.log(formRef);\n    // let errorParagraphRef = document.getElementsByClassName(\"error-paragraph\");\n    // if(formRef && formRef.getElementsByClassName(\"error-paragraph\")){\n    //   formRef.remove(errorParagraphRef);\n    // }\n    // let errorParagragh = document.createElement(\"P\");\n    // let errorMessage = document.createTextNode(\"Unable to log you in at this time\");\n    // errorParagragh.classList.add(\"error-paragraph\");\n    // errorParagragh.appendChild(errorMessage);\n    // formRef.appendChild(errorParagragh);\n  }\n\n  ;\n\n  if (loading) {\n    console.log(\"...loading\");\n  }\n\n  if (data) {\n    let formRef = document.getElementsByClassName(\"login\")[0];\n\n    if (data.login.response_type.includes(\"Error\")) {\n      console.log(formRef); // let errorParagraphRef = document.getElementsByClassName(\"error-paragraph\");\n      // if(formRef && formRef.getElementsByClassName(\"error-paragraph\")){\n      //   formRef.remove(errorParagraphRef);\n      // }\n      // let errorParagragh = document.createElement(\"P\");\n      // let errorMessage = document.createTextNode(\"Invalid login credentials\");\n      // errorParagragh.classList.add(\"error-paragraph\");\n      // errorParagragh.appendChild(errorMessage);\n      // formRef.appendChild(errorParagragh);\n    }\n\n    ;\n    history.push('/home');\n  }\n\n  return generateButton();\n};\n\nconst LoginForm = props => {\n  const renderAuthenticateButton = loginOption => {\n    return /*#__PURE__*/React.createElement(Authenticate, {\n      loginOption: loginOption,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    });\n  };\n\n  if (props.loginOption === \"login\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      class: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"loginUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      class: \"form-control\",\n      id: \"loginUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"loginPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      class: \"form-control\",\n      id: \"loginPassword\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }), renderAuthenticateButton(props.loginOption));\n  }\n\n  if (props.loginOption === \"signup\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      class: \"signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"signupUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      class: \"form-control\",\n      id: \"signupUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"signupEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      class: \"form-control\",\n      id: \"signupEmail\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Enter Email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"small\", {\n      id: \"emailHelp\",\n      class: \"form-text text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, \"We'll never share your email with anyone else.\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"signupPassword1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      class: \"form-control\",\n      id: \"signupPassword1\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"signupPassword2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      class: \"form-control\",\n      id: \"signupPassword2\",\n      placeholder: \"Confirm Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }))), renderAuthenticateButton(props.loginOption));\n  }\n\n  if (props.loginOption === \"guest\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      class: \"guest\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"guestUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      class: \"form-control\",\n      id: \"guestUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    })), renderAuthenticateButton(props.loginOption));\n  }\n};\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loginOption: \"login\"\n    };\n  }\n\n  renderForm() {\n    if (this.state.loginOption === \"login\") {\n      return /*#__PURE__*/React.createElement(LoginForm, {\n        loginOption: this.state.loginOption,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }\n      });\n    } // register($username: String!, $email: String!, $password: String!)\n\n\n    if (this.state.loginOption === \"signup\") {\n      return /*#__PURE__*/React.createElement(LoginForm, {\n        loginOption: this.state.loginOption,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 9\n        }\n      });\n    }\n\n    if (this.state.loginOption === \"guest\") {\n      return /*#__PURE__*/React.createElement(LoginForm, {\n        loginOption: this.state.loginOption,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 9\n        }\n      });\n    }\n  }\n\n  onSubmit(e) {\n    console.log(e.target.form.elements);\n    return false;\n  }\n\n  selectLoginOption(e, loginOption) {\n    // see if this becomes a problem later\n    document.forms[0].reset();\n    let allLoginButtons = document.getElementsByClassName(\"login-options\")[0].childNodes;\n    allLoginButtons.forEach(button => {\n      button.classList.remove(\"active\");\n    });\n    e.target.closest(\"button\").classList.add(\"active\"); //React Re-renders when this.setState is called.\n\n    this.setState({\n      loginOption: loginOption\n    });\n    return false;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"login-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"login-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }\n    }, this.renderForm(), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"login-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      class: \"login-btn btn active\",\n      onClick: $event => this.selectLoginOption($event, `login`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 15\n      }\n    }, \"Login\")), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"signup-btn btn\",\n      onClick: $event => this.selectLoginOption($event, `signup`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }, \"Sign Up\")), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"guest-btn btn\",\n      onClick: $event => this.selectLoginOption($event, `guest`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 15\n      }\n    }, \"Guest\")))));\n  }\n\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/menekou/projects/react/shortest-path/react-frontend/src/Login Page/LoginPage.js"],"names":["React","AuthHelper","useLazyQuery","useMutation","useHistory","Authenticate","props","history","login","loading","error","data","signup","signupLoading","signupError","signupData","generateButton","loginOption","e","variables","username","target","form","elements","value","password","preventDefault","console","log","email","formRef","document","getElementsByClassName","response_type","includes","push","LoginForm","renderAuthenticateButton","LoginPage","Component","constructor","state","renderForm","onSubmit","selectLoginOption","forms","reset","allLoginButtons","childNodes","forEach","button","classList","remove","closest","add","setState","render","$event"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './LoginPage.css';\nimport AuthHelper from '../Auth Helpers/AuthHelper';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { useHistory } from \"react-router-dom\";\n\nconst Authenticate = (props) => {\n  let history = useHistory();\n  const [login, { loading, error, data }] = useLazyQuery(AuthHelper.login);\n  const [signup, { signupLoading, signupError, signupData }] = useMutation(AuthHelper.signup);\n\n  const generateButton = () => {\n    if(props.loginOption === \"login\"){\n      return (\n        <button type=\"button\" class=\"btn btn-primary\" onClick={\n          (e) => login(\n          {\n            variables: {\n              username: e.target.form.elements[0].value,\n              password: e.target.form.elements[1].value\n            }\n          },\n          e.preventDefault(),\n          console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n          )\n        }>Submit</button>\n      )\n    }\n  \n    if(props.loginOption === \"signup\"){\n      return (\n        <button type=\"button\" class=\"btn btn-primary\" onClick={\n          (e) => signup(\n          //have this call a function beforehand here to validate passwords and form elements\n          {\n            variables: {\n              username: e.target.form.elements[0],\n              email: e.target.form.elements[1],\n              password: e.target.form.elements[2]\n            }\n          },\n          e.preventDefault(),\n          console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n          )\n        }>Submit</button>\n      )\n    }\n  \n    if(props.loginOption === \"guest\"){\n      return (\n        <button type=\"button\" class=\"btn btn-primary\" onClick={\n          (e) => login(\n          {\n            variables: {\n              username: e.target.form.elements[0],\n              password: \"\"\n            }\n          },\n          e.preventDefault(),\n          console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n          )\n        }>Submit</button>\n      )\n    }\n  }\n\n  if(error){\n    console.log(error);\n    // let formRef = document.getElementsByClassName(\"login\")[0];\n    // console.log(formRef);\n    // let errorParagraphRef = document.getElementsByClassName(\"error-paragraph\");\n\n    // if(formRef && formRef.getElementsByClassName(\"error-paragraph\")){\n    //   formRef.remove(errorParagraphRef);\n    // }\n\n    // let errorParagragh = document.createElement(\"P\");\n    // let errorMessage = document.createTextNode(\"Unable to log you in at this time\");\n\n    // errorParagragh.classList.add(\"error-paragraph\");\n    // errorParagragh.appendChild(errorMessage);\n\n    // formRef.appendChild(errorParagragh);\n  };\n\n  if(loading){\n    console.log(\"...loading\");\n  }\n\n  if(data){\n    let formRef = document.getElementsByClassName(\"login\")[0];\n\n    if(data.login.response_type.includes(\"Error\")){\n      console.log(formRef);\n      // let errorParagraphRef = document.getElementsByClassName(\"error-paragraph\");\n\n      // if(formRef && formRef.getElementsByClassName(\"error-paragraph\")){\n      //   formRef.remove(errorParagraphRef);\n      // }\n\n      // let errorParagragh = document.createElement(\"P\");\n      // let errorMessage = document.createTextNode(\"Invalid login credentials\");\n\n      // errorParagragh.classList.add(\"error-paragraph\");\n      // errorParagragh.appendChild(errorMessage);\n\n      // formRef.appendChild(errorParagragh);\n    };\n\n    history.push('/home');\n  }\n\n  return generateButton();\n}\n\nconst LoginForm = (props) => {\n  const renderAuthenticateButton = (loginOption) => {\n    return(\n      <Authenticate \n        loginOption={loginOption}\n      />\n    )\n  }\n\n  if(props.loginOption === \"login\"){\n    return (\n      <form class=\"login\">\n        <div class=\"form-group\">\n          <label for=\"loginUsername\">Username</label>\n          <input type=\"username\" class=\"form-control\" id=\"loginUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"loginPassword\">Password</label>\n          <input type=\"password\" class=\"form-control\" id=\"loginPassword\" placeholder=\"Password\"></input>\n        </div>\n        <br></br>\n        {renderAuthenticateButton(props.loginOption)}\n      </form>\n    );\n  }\n\n  if(props.loginOption === \"signup\"){\n    return (\n      <form class=\"signup\">\n        <div class=\"form-group\">\n          <label for=\"signupUsername\">Username</label>\n          <input type=\"username\" class=\"form-control\" id=\"signupUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"signupEmail\">Email address</label>\n          <input type=\"email\" class=\"form-control\" id=\"signupEmail\" aria-describedby=\"emailHelp\" placeholder=\"Enter Email\"></input>\n          <small id=\"emailHelp\" class=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n        </div>\n        <div class=\"password\">\n          <div class=\"form-group\">\n            <label for=\"signupPassword1\">Password</label>\n            <input type=\"password\" class=\"form-control\" id=\"signupPassword1\" placeholder=\"Password\"></input>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"signupPassword2\">Confirm Password</label>\n            <input type=\"password\" class=\"form-control\" id=\"signupPassword2\" placeholder=\"Confirm Password\"></input>\n          </div>\n        </div>\n        {renderAuthenticateButton(props.loginOption)}\n      </form>\n    );\n  }\n\n  if(props.loginOption === \"guest\"){\n    return (\n      <form class=\"guest\">\n        <div class=\"form-group\">\n          <label for=\"guestUsername\">Username</label>\n          <input type=\"username\" class=\"form-control\" id=\"guestUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        {renderAuthenticateButton(props.loginOption)}\n      </form>\n    );\n  }\n}\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loginOption: \"login\",\n    }\n  }\n\n  renderForm(){\n    if(this.state.loginOption === \"login\"){\n      return (\n        <LoginForm \n          loginOption={this.state.loginOption}\n        />\n      );\n    }\n    // register($username: String!, $email: String!, $password: String!)\n    if(this.state.loginOption === \"signup\"){\n      return (\n        <LoginForm \n          loginOption={this.state.loginOption}\n        />\n      );\n    }\n\n    if(this.state.loginOption === \"guest\"){\n      return (\n        <LoginForm \n          loginOption={this.state.loginOption}\n        />\n      );\n    }\n  }\n\n  onSubmit(e){\n    console.log(e.target.form.elements);\n\n    return false;\n  }\n  \n  selectLoginOption(e, loginOption){\n    // see if this becomes a problem later\n    document.forms[0].reset();\n\n    let allLoginButtons = document.getElementsByClassName(\"login-options\")[0].childNodes;\n    \n    allLoginButtons.forEach((button) => {\n      button.classList.remove(\"active\");\n    });\n\n    e.target.closest(\"button\").classList.add(\"active\");\n\n    //React Re-renders when this.setState is called.\n    this.setState({\n      loginOption: loginOption\n    })\n\n    return false;\n  }\n\n  render() {\n    return (\n      <div id=\"login-page\">\n        <div class=\"login-container\">\n\n          {/* Login form */}\n          {this.renderForm()}\n     \n          <div class=\"login-options\">\n            <button class=\"login-btn btn active\" onClick={($event) => this.selectLoginOption($event, `login`)}>\n              <h1>Login</h1>\n            </button>\n            <button class=\"signup-btn btn\" onClick={($event) => this.selectLoginOption($event, `signup`)}>\n              <h1>Sign Up</h1>\n            </button>\n            <button class=\"guest-btn btn\" onClick={($event) => this.selectLoginOption($event, `guest`)}>\n              <h1>Guest</h1>\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}
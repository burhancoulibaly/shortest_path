{"ast":null,"code":"var _jsxFileName = \"/home/menekou/projects/react/shortest-path/react-frontend/src/Login Page/LoginPage.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport './LoginPage.css';\nimport AuthHelper from '../Auth Helpers/AuthHelper';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { Redirect } from 'react-router-dom';\nimport UserContext from \"../UserContext\";\n\nconst LoginForm = props => {\n  if (props.loginTab === \"login\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 7\n      }\n    }, props.loginState === \"system-error\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 49\n      }\n    }, \"Unable to log you in at this time\"), props.loginState === \"invalid-login\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 50\n      }\n    }, \"Invalid login credentials\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"loginUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      className: \"form-control\",\n      id: \"loginUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"loginPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 11\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"loginPassword\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: e => props.login({\n        variables: {\n          username: e.target.form.elements[0].value,\n          password: e.target.form.elements[1].value\n        }\n      }, e.preventDefault() // console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n      ),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }\n    }, \"Submit\"));\n  }\n\n  if (props.loginTab === \"signup\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 7\n      }\n    }, props.loginState === \"system-error\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 49\n      }\n    }, \"Unable to register you in at this time\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"signupUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      className: \"form-control\",\n      id: \"signupUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"signupEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      id: \"signupEmail\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Enter Email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"small\", {\n      id: \"emailHelp\",\n      className: \"form-text text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }, \"We'll never share your email with anyone else.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"signupPassword1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"signupPassword1\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"signupPassword2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"signupPassword2\",\n      placeholder: \"Confirm Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: e => props.signup( //have this call a function beforehand here to validate passwords and form elements\n      {\n        variables: {\n          username: e.target.form.elements[0].value,\n          email: e.target.form.elements[1].value,\n          password: e.target.form.elements[2].value\n        }\n      }, e.preventDefault() // console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n      ),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, \"Submit\"));\n  }\n\n  if (props.loginTab === \"guest\") {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"guest\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, props.loginState === \"system-error\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 49\n      }\n    }, \"Unable to log you in at this time\"), props.loginState === \"invalid-login\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 50\n      }\n    }, \"Username required\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"guestUsername\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"username\",\n      className: \"form-control\",\n      id: \"guestUsername\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: e => props.login({\n        variables: {\n          username: e.target.form.elements[0].value,\n          password: \"\"\n        }\n      }, e.preventDefault(), console.log(`\"${e.target.form.elements[0].value}\"`)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, \"Submit\"));\n  }\n};\n\nfunction LoginPage() {\n  //Login tab state variable\n  const [user, setUser] = useContext(UserContext);\n  const [loginTab, setLoginTab] = useState(\"login\");\n  const [loginState, setLoginState] = useState(\"\");\n  const [login, {\n    error: loginError,\n    data: loginData\n  }] = useLazyQuery(AuthHelper.login, {\n    fetchPolicy: \"network-only\"\n  });\n  const [signup, {\n    error: signupError,\n    data: signupData\n  }] = useMutation(AuthHelper.signup);\n  useEffect(() => {\n    const updateUser = userData => {\n      if (userData.response_type !== \"Success\" || !userData.response_type) {\n        setUser(null);\n        return;\n      }\n\n      setUser({\n        username: userData.username,\n        role: userData.role,\n        accessToken: userData.accessToken\n      });\n      return;\n    };\n\n    if (signupError) {\n      console.log(signupError);\n      updateUser(signupError);\n      setLoginState(\"system-error\");\n      return;\n    }\n\n    ;\n\n    if (signupData) {\n      if (!signupData.register.response_type.includes(\"Error\")) {\n        // console.log(signupData.register);\n        updateUser(signupData.register);\n        setLoginState(\"success\");\n        return;\n      }\n\n      ;\n      console.log(signupData.register);\n      updateUser(signupData.register);\n      return;\n    }\n\n    ;\n\n    if (loginError) {\n      console.log(loginError);\n      setLoginState(\"system-error\");\n      return;\n    }\n\n    ;\n\n    if (loginData) {\n      if (!loginData.login.response_type.includes(\"Error\")) {\n        // console.log(loginData.login);\n        updateUser(loginData.login);\n        setLoginState(\"success\");\n        return;\n      }\n\n      ;\n      console.log(loginData.login);\n      setLoginState(\"invalid-login\");\n      return;\n    }\n\n    ;\n  }, [loginError, loginData, signupError, signupData, setUser]);\n\n  const renderForm = () => {\n    return /*#__PURE__*/React.createElement(LoginForm, {\n      loginTab: loginTab,\n      loginState: loginState,\n      login: login,\n      signup: signup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }\n    });\n  };\n\n  const changeLoginTab = (e, loginOption) => {\n    // see if this becomes a problem later\n    document.forms[0].reset();\n    setLoginState(\"\");\n    let allLoginButtons = document.getElementsByClassName(\"login-options\")[0].childNodes;\n    allLoginButtons.forEach(button => {\n      button.classList.remove(\"active\");\n    });\n    e.target.closest(\"button\").classList.add(\"active\");\n    return loginOption;\n  };\n\n  if (loginState === \"success\") {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"login-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }\n  }, renderForm(), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"login-btn btn active\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `login`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"signup-btn btn\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `signup`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }, \"Sign Up\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"guest-btn btn\",\n    onClick: $event => setLoginTab(changeLoginTab($event, `guest`)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, \"Guest\")))));\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/menekou/projects/react/shortest-path/react-frontend/src/Login Page/LoginPage.js"],"names":["React","useState","useEffect","useContext","AuthHelper","useLazyQuery","useMutation","Redirect","UserContext","LoginForm","props","loginTab","loginState","e","login","variables","username","target","form","elements","value","password","preventDefault","signup","email","console","log","LoginPage","user","setUser","setLoginTab","setLoginState","error","loginError","data","loginData","fetchPolicy","signupError","signupData","updateUser","userData","response_type","role","accessToken","register","includes","renderForm","changeLoginTab","loginOption","document","forms","reset","allLoginButtons","getElementsByClassName","childNodes","forEach","button","classList","remove","closest","add","$event"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport './LoginPage.css';\nimport AuthHelper from '../Auth Helpers/AuthHelper';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { Redirect } from 'react-router-dom'\nimport UserContext from \"../UserContext\";\n\n\nconst LoginForm = (props) => {\n  if(props.loginTab === \"login\"){\n    return (\n      <form className=\"login\">\n        {props.loginState === \"system-error\" && <p className=\"error\">Unable to log you in at this time</p>}\n        {props.loginState === \"invalid-login\" && <p className=\"error\">Invalid login credentials</p>}\n        <div className=\"form-group\">\n          <label htmlFor=\"loginUsername\">Username</label>\n          <input type=\"username\" className=\"form-control\" id=\"loginUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"loginPassword\">Password</label>\n          <input type=\"password\" className=\"form-control\" id=\"loginPassword\" placeholder=\"Password\"></input>\n        </div>\n        <br></br>\n        <button type=\"button\" className=\"btn btn-primary\" onClick={\n            (e) => props.login(\n            {\n              variables: {\n                username: e.target.form.elements[0].value,\n                password: e.target.form.elements[1].value\n              }\n            },\n            e.preventDefault(),\n            // console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n            )\n          }>Submit</button>\n      </form>\n    );\n  }\n\n  if(props.loginTab === \"signup\"){\n    return (\n      <form className=\"signup\">\n        {props.loginState === \"system-error\" && <p className=\"error\">Unable to register you in at this time</p>}\n        <div className=\"form-group\">\n          <label htmlFor=\"signupUsername\">Username</label>\n          <input type=\"username\" className=\"form-control\" id=\"signupUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"signupEmail\">Email address</label>\n          <input type=\"email\" className=\"form-control\" id=\"signupEmail\" aria-describedby=\"emailHelp\" placeholder=\"Enter Email\"></input>\n          <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n        </div>\n        <div className=\"password\">\n          <div className=\"form-group\">\n            <label htmlFor=\"signupPassword1\">Password</label>\n            <input type=\"password\" className=\"form-control\" id=\"signupPassword1\" placeholder=\"Password\"></input>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"signupPassword2\">Confirm Password</label>\n            <input type=\"password\" className=\"form-control\" id=\"signupPassword2\" placeholder=\"Confirm Password\"></input>\n          </div>\n        </div>\n        <button type=\"button\" className=\"btn btn-primary\" onClick={\n            (e) => props.signup(\n            //have this call a function beforehand here to validate passwords and form elements\n            {\n              variables: {\n                username: e.target.form.elements[0].value,\n                email: e.target.form.elements[1].value,\n                password: e.target.form.elements[2].value\n              }\n            },\n            e.preventDefault(),\n            // console.log(`\"${e.target.form.elements[0].value}\"`, `\"${e.target.form.elements[1].value}\"`),\n            )\n          }>Submit</button>\n      </form>\n    );\n  }\n\n  if(props.loginTab === \"guest\"){\n    return (\n      <form className=\"guest\">\n        {props.loginState === \"system-error\" && <p className=\"error\">Unable to log you in at this time</p>}\n        {props.loginState === \"invalid-login\" && <p className=\"error\">Username required</p>}\n        <div className=\"form-group\">\n          <label htmlFor=\"guestUsername\">Username</label>\n          <input type=\"username\" className=\"form-control\" id=\"guestUsername\" aria-describedby=\"usernameHelp\" placeholder=\"Enter Username\"></input>\n        </div>\n        <button type=\"button\" className=\"btn btn-primary\" onClick={\n            (e) => props.login(\n            {\n              variables: {\n                username: e.target.form.elements[0].value,\n                password: \"\"\n              }\n            },\n            e.preventDefault(),\n            console.log(`\"${e.target.form.elements[0].value}\"`),\n            )\n          }>Submit</button>\n      </form>\n    );\n  }\n};\n\nfunction LoginPage() {\n  //Login tab state variable\n  const [user, setUser] = useContext(UserContext);\n  const [loginTab, setLoginTab] = useState(\"login\");\n  const [loginState, setLoginState] = useState(\"\");\n  const [login, { error: loginError, data: loginData }] = useLazyQuery(AuthHelper.login, { fetchPolicy: \"network-only\" });\n  const [signup, { error: signupError, data: signupData }] = useMutation(AuthHelper.signup);\n\n  useEffect(() => {\n    const updateUser = (userData) => {\n      if(userData.response_type !== \"Success\" || !userData.response_type){\n        setUser(null);\n\n        return;\n      }\n\n      setUser({\n        username: userData.username,\n        role: userData.role,\n        accessToken: userData.accessToken\n      })\n  \n      return;\n    }\n\n    if(signupError){\n      console.log(signupError);\n\n      updateUser(signupError);\n  \n      setLoginState(\"system-error\");\n\n      return;\n    };\n  \n    if(signupData){\n      if(!signupData.register.response_type.includes(\"Error\")){\n        // console.log(signupData.register);\n\n        updateUser(signupData.register);\n        \n        setLoginState(\"success\");\n\n        return;\n      };\n  \n      console.log(signupData.register);\n\n      updateUser(signupData.register);\n      \n      return;\n    };\n  \n    if(loginError){\n      console.log(loginError);\n      \n      \n      setLoginState(\"system-error\");\n\n      return;\n    };\n  \n    if(loginData){\n      if(!loginData.login.response_type.includes(\"Error\")){\n        // console.log(loginData.login);\n        \n        updateUser(loginData.login);\n\n        setLoginState(\"success\");\n\n        return;\n      };\n  \n      console.log(loginData.login);\n\n      setLoginState(\"invalid-login\");\n\n      return;\n    };\n  }, [loginError, loginData, signupError, signupData, setUser])\n\n  const renderForm = () => {\n    return (\n      <LoginForm \n        loginTab={loginTab}\n        loginState={loginState}\n        login={login}\n        signup={signup}\n      />\n    )\n  }\n\n  const changeLoginTab = (e, loginOption) => {\n    // see if this becomes a problem later\n    document.forms[0].reset();\n\n    setLoginState(\"\");\n\n    let allLoginButtons = document.getElementsByClassName(\"login-options\")[0].childNodes;\n    \n    allLoginButtons.forEach((button) => {\n      button.classList.remove(\"active\");\n    });\n\n    e.target.closest(\"button\").classList.add(\"active\");\n\n    return loginOption;\n  }\n\n  if(loginState === \"success\"){\n    return <Redirect to='/home' />\n  }\n\n  return (\n    <div id=\"login-page\">\n      <div className=\"login-container\">\n\n        {/* Login form */}\n        {renderForm()}\n   \n        <div className=\"login-options\">\n          <button className=\"login-btn btn active\" onClick={($event) => setLoginTab(changeLoginTab($event, `login`))}>\n            <h1>Login</h1>\n          </button>\n          <button className=\"signup-btn btn\" onClick={($event) => setLoginTab(changeLoginTab($event, `signup`))}>\n            <h1>Sign Up</h1>\n          </button>\n          <button className=\"guest-btn btn\" onClick={($event) => setLoginTab(changeLoginTab($event, `guest`))}>\n            <h1>Guest</h1>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}